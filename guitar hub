<!doctype html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GuitarHub ‚Äî —Å–∞–π—Ç –ø—Ä–æ –≥–∏—Ç–∞—Ä—ã</title>
  <style>
    :root{
      --bg:#0b1020;
      --card:#121a2d;
      --text:#eef3ff;
      --muted:#a8b3d6;
      --accent:#ffb020;
      --accent2:#6aa6ff;
      --ok:#3ddc97;
      --bad:#ff6b6b;
      --border:rgba(255,255,255,.10);
      --shadow:0 16px 50px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(1000px 550px at 10% 10%, rgba(255,176,32,.18), transparent 60%),
        radial-gradient(900px 520px at 90% 30%, rgba(106,166,255,.18), transparent 60%),
        var(--bg);
      min-height:100vh;
    }
    a{color:inherit; text-decoration:none}
    .container{width:min(1150px,100%); margin:0 auto; padding:22px;}
    .nav{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:14px 18px;
      border:1px solid var(--border);
      border-radius:18px;
      background:rgba(255,255,255,.04);
      backdrop-filter: blur(10px);
      position:sticky; top:12px; z-index:10;
    }
    .logo{display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:.3px;}
    .logo-badge{
      width:38px; height:38px; border-radius:12px;
      background:linear-gradient(135deg, rgba(255,176,32,.95), rgba(255,176,32,.45));
      display:grid; place-items:center; color:#1a1205; font-weight:1000;
      box-shadow:0 10px 25px rgba(0,0,0,.25);
    }
    .menu{display:flex; gap:10px; flex-wrap:wrap; color:var(--muted); font-weight:650; font-size:14px}
    .menu a{padding:8px 10px; border-radius:12px}
    .menu a:hover{background:rgba(255,255,255,.06); color:var(--text)}
    .actions{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
    .btn{
      border:0; cursor:pointer;
      padding:10px 12px; border-radius:14px;
      font-weight:800;
      background:linear-gradient(135deg, rgba(255,176,32,.95), rgba(255,176,32,.55));
      color:#1a1205;
      transition:transform .06s ease, filter .2s ease;
      white-space:nowrap;
    }
    .btn:active{transform:translateY(1px)}
    .btn.secondary{
      background:transparent; color:var(--text);
      border:1px solid var(--border);
      font-weight:750;
    }
    .pill{
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      padding:8px 10px;
      border-radius:999px;
      font-size:13px;
      color:var(--muted);
    }

    .hero{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap:18px;
      margin-top:18px;
    }
    @media (max-width:900px){ .hero{grid-template-columns:1fr} }

    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.05), transparent 85%),
                 rgba(18,26,45,.92);
      border:1px solid var(--border);
      border-radius:22px;
      padding:20px;
      box-shadow:var(--shadow);
    }
    h1{margin:0; font-size:clamp(26px,3vw,40px); line-height:1.15}
    h2{margin:0 0 12px; font-size:20px}
    .lead{margin:12px 0 0; color:var(--muted); font-size:15px; line-height:1.65}
    .badges{display:flex; gap:10px; flex-wrap:wrap; margin-top:14px}
    .badge{
      font-size:13px; color:var(--text);
      border:1px solid var(--border);
      background:rgba(255,255,255,.04);
      padding:8px 10px; border-radius:999px;
    }
    .badge strong{color:var(--accent)}
    .hero-actions{display:flex; gap:10px; flex-wrap:wrap; margin-top:16px}

    .mini{display:grid; gap:12px;}
    .tile{
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      border-radius:18px;
      padding:14px;
    }
    .tile h3{margin:0 0 6px; font-size:16px}
    .tile p{margin:0; color:var(--muted); font-size:13px; line-height:1.5}

    .section{margin-top:18px}
    .grid2{display:grid; grid-template-columns:1fr 1fr; gap:14px;}
    @media (max-width:900px){ .grid2{grid-template-columns:1fr} }

    /* gallery */
    .toolbar{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      margin-bottom:12px;
    }
    .search{
      flex:1;
      display:flex; gap:10px; align-items:center;
      padding:10px 12px;
      border-radius:16px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      min-width:260px;
    }
    .search input{
      width:100%;
      background:transparent;
      border:0; outline:0;
      color:var(--text);
      font-size:14px;
    }
    select, input[type="number"]{
      background:rgba(255,255,255,.03);
      border:1px solid var(--border);
      color:var(--text);
      padding:10px 12px;
      border-radius:16px;
      outline:none;
      font-weight:650;
    }
    .grid-products{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:14px;
    }
    @media (max-width:980px){ .grid-products{grid-template-columns: repeat(2, 1fr);} }
    @media (max-width:640px){ .grid-products{grid-template-columns: 1fr;} }

    .product{
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      border-radius:20px;
      overflow:hidden;
      display:grid;
    }
    .photo{
      height:180px;
      position:relative;
      background:#0a0f1e;
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .photo img{width:100%; height:100%; object-fit:cover; display:block; filter:saturate(1.02) contrast(1.02);}
    .photo .corner{
      position:absolute; left:10px; top:10px;
      display:flex; gap:8px; flex-wrap:wrap;
    }
    .chip{
      font-size:12px;
      padding:6px 9px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(18,26,45,.70);
      backdrop-filter: blur(8px);
    }
    .chip strong{color:var(--accent)}
    .pinfo{padding:14px; display:grid; gap:10px;}
    .pinfo h3{margin:0; font-size:16px}
    .meta{display:flex; gap:8px; flex-wrap:wrap; color:var(--muted); font-size:13px}
    .tag{
      padding:4px 8px;
      border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
    }
    .row{
      display:flex; justify-content:space-between; gap:10px; align-items:flex-end;
      margin-top:4px;
    }
    .row b{font-size:18px}
    .row small{color:var(--muted)}
    .buy{display:flex; gap:10px; flex-wrap:wrap;}
    .buy button{flex:1}

    .kbd{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;}
    .hr{height:1px; background:rgba(255,255,255,.08); margin:14px 0;}
    .hint{color:var(--muted); font-size:13px; line-height:1.55; margin:8px 0 0}

    /* chords */
    .chords{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:14px;
    }
    @media (max-width:900px){ .chords{grid-template-columns:1fr} }
    .chord-grid{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:10px;
    }
    @media (max-width:640px){ .chord-grid{grid-template-columns:repeat(2,1fr)} }
    .ch{
      border:1px solid var(--border);
      background:rgba(255,255,255,.03);
      border-radius:18px;
      padding:12px;
      cursor:pointer;
      transition:transform .06s ease, background .2s ease;
    }
    .ch:hover{background:rgba(255,255,255,.05)}
    .ch:active{transform:translateY(1px)}
    .ch b{display:block; margin-bottom:8px}
    .diagram{
      width:100%;
      aspect-ratio: 4/5;
      border-radius:14px;
      border:1px dashed rgba(255,255,255,.16);
      display:grid;
      place-items:center;
      padding:10px;
      background:rgba(0,0,0,.10);
    }
    .diagram svg{width:100%; height:100%}

    /* tools */
    .tools{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:14px;
    }
    @media (max-width:980px){ .tools{grid-template-columns:1fr 1fr;} }
    @media (max-width:680px){ .tools{grid-template-columns:1fr;} }
    .tool-title{display:flex; align-items:center; justify-content:space-between; gap:10px}
    .tool-title b{font-size:16px}
    .tool-controls{display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top:10px}
    .big{
      font-size:28px;
      font-weight:900;
      letter-spacing:.6px;
    }
    .status{font-size:13px; color:var(--muted)}
    .bar{
      height:10px; border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06);
      overflow:hidden;
    }
    .bar > div{
      height:100%;
      width:0%;
      background:linear-gradient(90deg, rgba(106,166,255,.9), rgba(255,176,32,.85));
    }

    /* quiz */
    .quizq{margin:0 0 8px; font-weight:800}
    .opt{display:flex; gap:10px; flex-wrap:wrap}
    .opt button{flex:1}
    .good{color:var(--ok); font-weight:800}
    .bad{color:var(--bad); font-weight:800}

    footer{
      margin:18px 0 6px;
      color:var(--muted);
      font-size:13px;
      text-align:center;
    }

    .toast{
      position:fixed;
      left:50%; bottom:18px;
      transform:translateX(-50%);
      background:rgba(18,26,45,.95);
      border:1px solid var(--border);
      padding:10px 12px;
      border-radius:14px;
      color:var(--text);
      display:none;
      box-shadow:0 14px 50px rgba(0,0,0,.45);
      max-width:min(700px,92vw);
    }
  </style>
</head>
<body>
  <div class="container">
    <nav class="nav">
      <div class="logo">
        <div class="logo-badge">üé∏</div>
        <div>
          <div>GuitarHub</div>
          <div style="font-size:12px;color:var(--muted);font-weight:750">–°–∞–π—Ç –ø—Ä–æ –≥–∏—Ç–∞—Ä—ã: –≤–∏–¥—ã ‚Ä¢ —É—Ö–æ–¥ ‚Ä¢ –∞–∫–∫–æ—Ä–¥—ã ‚Ä¢ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</div>
        </div>
      </div>

      <div class="menu">
        <a href="#guide">–ì–∞–π–¥</a>
        <a href="#gallery">–ì–∞–ª–µ—Ä–µ—è</a>
        <a href="#chords">–ê–∫–∫–æ—Ä–¥—ã</a>
        <a href="#tools">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</a>
        <a href="#quiz">–ö–≤–∏–∑</a>
        <a href="#contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
      </div>

      <div class="actions">
        <span class="pill">‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ: <b id="favCount">0</b></span>
        <button class="btn secondary" onclick="scrollToId('tools')">–û—Ç–∫—Ä—ã—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</button>
        <button class="btn" onclick="scrollToId('gallery')">–°–º–æ—Ç—Ä–µ—Ç—å –≥–∏—Ç–∞—Ä—ã</button>
      </div>
    </nav>

    <section class="hero">
      <div class="card">
        <h1>–í—Å—ë –ø—Ä–æ –≥–∏—Ç–∞—Ä—ã ‚Äî –æ—Ç –≤—ã–±–æ—Ä–∞ –¥–æ –ø–µ—Ä–≤—ã—Ö –ø–µ—Å–µ–Ω</h1>
        <p class="lead">
          –ó–¥–µ—Å—å —Å–æ–±—Ä–∞–Ω–∞ –±–∞–∑–∞ –ø–æ —Ç–∏–ø–∞–º –≥–∏—Ç–∞—Ä, –æ—Å–Ω–æ–≤–∞–º —É—Ö–æ–¥–∞, —Å—Ç—Ä–æ—è–º, –∞–∫–∫–æ—Ä–¥–∞–º –∏ –ø–æ–ª–µ–∑–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º.
          –ê –µ—â—ë ‚Äî –±–æ–ª—å—à–∞—è –≥–∞–ª–µ—Ä–µ—è —Å —Ñ–æ—Ç–æ –∏ –ø–æ–¥–±–æ—Ä–æ–º ¬´–∫–∞–∫–∞—è –≥–∏—Ç–∞—Ä–∞ –ø–æ–¥–æ–π–¥—ë—Ç —Ç–µ–±–µ¬ª.
        </p>
        <div class="badges">
          <div class="badge"><strong>–ü–æ–Ω—è—Ç–Ω–æ</strong> –Ω–æ–≤–∏—á–∫—É</div>
          <div class="badge"><strong>–ê–∫–∫–æ—Ä–¥—ã</strong> —Å –¥–∏–∞–≥—Ä–∞–º–º–∞–º–∏</div>
          <div class="badge"><strong>–ú–µ—Ç—Ä–æ–Ω–æ–º</strong> + —Ç—é–Ω–µ—Ä</div>
          <div class="badge"><strong>–ü–æ–¥–±–æ—Ä</strong> –ø–æ —Å—Ç–∏–ª—é</div>
        </div>
        <div class="hero-actions">
          <button class="btn" onclick="scrollToId('guide')">–° —á–µ–≥–æ –Ω–∞—á–∞—Ç—å</button>
          <button class="btn secondary" onclick="scrollToId('chords')">–£—á–∏—Ç—å –∞–∫–∫–æ—Ä–¥—ã</button>
        </div>
        <p class="hint">
          –ü–æ–¥—Å–∫–∞–∑–∫–∞: –≤ –≥–∞–ª–µ—Ä–µ–µ –µ—Å—Ç—å –ø–æ–∏—Å–∫, —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É, —Å—Ç–∏–ª—é, —Ü–µ–Ω–µ –∏ —É—Ä–æ–≤–Ω—é. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ ‚≠ê.
        </p>
      </div>

      <div class="mini">
        <div class="tile card">
          <h3>üéØ –ë—ã—Å—Ç—Ä—ã–π –ø–æ–¥–±–æ—Ä</h3>
          <p>–í—ã–±–µ—Ä–∏ —Å—Ç–∏–ª—å –∏ —É—Ä–æ–≤–µ–Ω—å ‚Äî —Å–∞–π—Ç –ø–æ–¥—Å–∫–∞–∂–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ç–∏–ø –≥–∏—Ç–∞—Ä—ã –∏ ‚Äú–ø–µ—Ä–≤—ã–π –∫–æ–º–ø–ª–µ–∫—Ç‚Äù.</p>
        </div>
        <div class="tile card">
          <h3>üßΩ –£—Ö–æ–¥ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</h3>
          <p>–ö–∞–∫ –º–µ–Ω—è—Ç—å —Å—Ç—Ä—É–Ω—ã, –ø—Ä–æ—Ç–∏—Ä–∞—Ç—å –≥—Ä–∏—Ñ, —Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∏ —á—Ç–æ –¥–µ–ª–∞—Ç—å —Å –¥—Ä–µ–±–µ–∑–≥–æ–º.</p>
        </div>
        <div class="tile card">
          <h3>üéµ –ü—Ä–∞–∫—Ç–∏–∫–∞</h3>
          <p>–ú–µ—Ç—Ä–æ–Ω–æ–º, —Ç—é–Ω–µ—Ä-—á–∞—Å—Ç–æ—Ç–∞, —à–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ —Å—Ç—Ä–æ—è–º –∏ –º–∏–Ω–∏-—Ç–µ—Å—Ç –ø–æ —Ç–µ–æ—Ä–∏–∏.</p>
        </div>
      </div>
    </section>

    <!-- GUIDE -->
    <section id="guide" class="section grid2">
      <div class="card">
        <h2>–ì–∞–π–¥: –∫–∞–∫—É—é –≥–∏—Ç–∞—Ä—É –≤—ã–±—Ä–∞—Ç—å</h2>
        <div class="hr"></div>
        <p class="lead" style="margin-top:0">
          <b>–ê–∫—É—Å—Ç–∏–∫–∞</b> ‚Äî –≥—Ä–æ–º–∫–∞—è, –±–µ–∑ —É—Å–∏–ª–∏—Ç–µ–ª—è, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–≤–æ—Ä–∞/–ø–µ—Å–µ–Ω/–ø–µ—Ä–µ–±–æ—Ä–æ–≤.<br/>
          <b>–ö–ª–∞—Å—Å–∏–∫–∞ (–Ω–µ–π–ª–æ–Ω)</b> ‚Äî –º—è–≥–∫–∏–µ —Å—Ç—Ä—É–Ω—ã, —É–¥–æ–±–Ω–æ —É—á–∏—Ç—å—Å—è, —á–∞—Å—Ç–æ –¥–ª—è ‚Äú–∏—Å–ø–∞–Ω–∫–∏‚Äù.<br/>
          <b>–≠–ª–µ–∫—Ç—Ä–æ</b> ‚Äî –Ω—É–∂–Ω–∞ –≤ —Å–≤—è–∑–∫–µ —Å —É—Å–∏–ª–∏—Ç–µ–ª–µ–º/–∫–æ–º–±–∏–∫–æ–º, –ª—É—á—à–µ –¥–ª—è —Ä–æ–∫–∞/–º–µ—Ç–∞–ª–∞.<br/>
          <b>–ë–∞—Å</b> ‚Äî –Ω–∏–∑–∫–∏–µ —á–∞—Å—Ç–æ—Ç—ã, –æ—Å–Ω–æ–≤–∞ —Ä–∏—Ç–º-—Å–µ–∫—Ü–∏–∏, –æ–±—ã—á–Ω–æ 4 —Å—Ç—Ä—É–Ω—ã.
        </p>
        <ul class="hint">
          <li><b>–ù–æ–≤–∏—á–∫—É:</b> –≤—ã–±–∏—Ä–∞–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —É–¥–æ–±–Ω–æ –¥–µ—Ä–∂–∞—Ç—å (–≤–µ—Å/–≥—Ä–∏—Ñ) –∏ –∫–æ—Ç–æ—Ä—ã–π –Ω—Ä–∞–≤–∏—Ç—Å—è –≤–Ω–µ—à–Ω–µ.</li>
          <li><b>–†–∞–∑–º–µ—Ä:</b> –µ—Å–ª–∏ –Ω–µ–±–æ–ª—å—à–æ–π —Ä–æ—Å—Ç ‚Äî —Å–º–æ—Ç—Ä–∏ travel/3/4.</li>
          <li><b>–°—Ç—Ä—É–Ω—ã:</b> –Ω–∞ —Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª–æ–∂–Ω–µ–µ –ø–∞–ª—å—Ü–∞–º, –Ω–æ –∑–≤—É—á–∞–Ω–∏–µ —è—Ä—á–µ.</li>
        </ul>
      </div>

      <div class="card">
        <h2>–ë—ã—Å—Ç—Ä—ã–π –ø–æ–¥–±–æ—Ä –ø–æ–¥ —Å—Ç–∏–ª—å</h2>
        <div class="hr"></div>

        <div class="toolbar" style="margin-bottom:0">
          <select id="pickStyle">
            <option value="rock">–†–æ–∫ / –ø–æ–ø-—Ä–æ–∫</option>
            <option value="metal">–ú–µ—Ç–∞–ª</option>
            <option value="pop">–ü–æ–ø / –∞–∫–∫–æ—Ä–¥—ã</option>
            <option value="jazz">–î–∂–∞–∑</option>
            <option value="fingerstyle">–§–∏–Ω–≥–µ—Ä—Å—Ç–∞–π–ª</option>
          </select>
          <select id="pickLevel">
            <option value="new">–ù–æ–≤–∏—á–æ–∫</option>
            <option value="mid">–£–≤–µ—Ä–µ–Ω–Ω—ã–π</option>
            <option value="pro">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</option>
          </select>
          <button class="btn" onclick="runPicker()">–ü–æ–¥–æ–±—Ä–∞—Ç—å</button>
        </div>

        <div class="tile" style="margin-top:12px">
          <div class="tool-title">
            <b>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è</b>
            <span class="pill" id="pickBadge">‚Äî</span>
          </div>
          <p class="lead" id="pickText" style="margin-top:8px">–í—ã–±–µ—Ä–∏ —Å—Ç–∏–ª—å –∏ —É—Ä–æ–≤–µ–Ω—å, –∑–∞—Ç–µ–º –Ω–∞–∂–º–∏ ¬´–ü–æ–¥–æ–±—Ä–∞—Ç—å¬ª.</p>
          <p class="hint" id="pickKit"></p>
        </div>
      </div>
    </section>

    <!-- GALLERY -->
    <section id="gallery" class="section card">
      <h2>–ì–∞–ª–µ—Ä–µ—è –≥–∏—Ç–∞—Ä</h2>
      <p class="lead" style="margin-top:-4px">
        –≠—Ç–æ –Ω–µ –º–∞–≥–∞–∑–∏–Ω. –¢—É—Ç –ø—Ä–∏–º–µ—Ä—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, —á—Ç–æ–±—ã —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ —Ç–∏–ø–∞—Ö, –∑–≤—É–∫–µ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏.
      </p>

      <div class="toolbar">
        <div class="search" title="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é / —Ç–µ–≥–∞–º">
          üîé <input id="q" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: strat, –∫–ª–∞—Å—Å–∏–∫–∞, –±–∞—Å, –¥–∂–∞–∑..." oninput="renderGallery()" />
        </div>

        <select id="type" onchange="renderGallery()">
          <option value="all">–í—Å–µ —Ç–∏–ø—ã</option>
          <option value="acoustic">–ê–∫—É—Å—Ç–∏–∫–∞</option>
          <option value="classical">–ö–ª–∞—Å—Å–∏–∫–∞ (–Ω–µ–π–ª–æ–Ω)</option>
          <option value="electric">–≠–ª–µ–∫—Ç—Ä–æ</option>
          <option value="bass">–ë–∞—Å</option>
        </select>

        <select id="skill" onchange="renderGallery()">
          <option value="all">–õ—é–±–æ–π —É—Ä–æ–≤–µ–Ω—å</option>
          <option value="new">–ù–æ–≤–∏—á–æ–∫</option>
          <option value="mid">–£–≤–µ—Ä–µ–Ω–Ω—ã–π</option>
          <option value="pro">–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</option>
        </select>

        <select id="sort" onchange="renderGallery()">
          <option value="popular">–°–Ω–∞—á–∞–ª–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ</option>
          <option value="cheap">–°–Ω–∞—á–∞–ª–∞ ‚Äú–¥–µ—à–µ–≤–ª–µ‚Äù</option>
          <option value="expensive">–°–Ω–∞—á–∞–ª–∞ ‚Äú–¥–æ—Ä–æ–∂–µ‚Äù</option>
        </select>
      </div>

      <div id="products" class="grid-products"></div>

      <p class="hint">
        ‚≠ê –ù–∞–∂–º–∏ ‚Äú–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ‚Äù, —á—Ç–æ–±—ã —Å–æ–±—Ä–∞—Ç—å —Å–≤–æ—é –ø–æ–¥–±–æ—Ä–∫—É. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
      </p>
    </section>

    <!-- CHORDS -->
    <section id="chords" class="section card">
      <h2>–ê–∫–∫–æ—Ä–¥—ã (–±–∞–∑–∞)</h2>
      <p class="lead" style="margin-top:-4px">–ö–ª–∏–∫–Ω–∏ –ø–æ –∞–∫–∫–æ—Ä–¥—É ‚Äî —Å–ø—Ä–∞–≤–∞ –ø–æ—è–≤–∏—Ç—Å—è –¥–∏–∞–≥—Ä–∞–º–º–∞. –ù–æ—Ç–∞—Ü–∏—è: 6 —Å—Ç—Ä—É–Ω (EADGBE).</p>

      <div class="chords">
        <div>
          <div class="toolbar" style="margin-top:4px">
            <div class="search">
              üéº <input id="cq" placeholder="–ü–æ–∏—Å–∫ –∞–∫–∫–æ—Ä–¥–∞: Am, C, Dm, G..." oninput="renderChords()" />
            </div>
            <select id="chGroup" onchange="renderChords()">
              <option value="all">–í—Å–µ</option>
              <option value="major">–ú–∞–∂–æ—Ä</option>
              <option value="minor">–ú–∏–Ω–æ—Ä</option>
              <option value="7">–°–µ–ø—Ç–∞–∫–∫–æ—Ä–¥—ã</option>
            </select>
          </div>

          <div id="chordsList" class="chord-grid"></div>
        </div>

        <div class="tile">
          <div class="tool-title">
            <b>–î–∏–∞–≥—Ä–∞–º–º–∞</b>
            <span class="pill" id="chName">‚Äî</span>
          </div>
          <div class="diagram" id="diagram">
            <span class="status">–í—ã–±–µ—Ä–∏ –∞–∫–∫–æ—Ä–¥ —Å–ª–µ–≤–∞</span>
          </div>
          <p class="hint" id="chHint"></p>
        </div>
      </div>
    </section>

    <!-- TOOLS -->
    <section id="tools" class="section card">
      <h2>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏</h2>
      <div class="tools">

        <div class="tile">
          <div class="tool-title">
            <b>üéß –ú–µ—Ç—Ä–æ–Ω–æ–º</b>
            <span class="pill" id="metroState">–≤—ã–∫–ª</span>
          </div>

          <div class="tool-controls">
            <label class="pill">BPM:
              <input id="bpm" type="number" min="40" max="240" value="90" style="width:88px; margin-left:8px">
            </label>
            <button class="btn" onclick="toggleMetronome()">–°—Ç–∞—Ä—Ç / –°—Ç–æ–ø</button>
            <button class="btn secondary" onclick="tapTempo()">Tap</button>
          </div>

          <div class="hr"></div>
          <div class="big"><span id="tick">‚Äî</span></div>
          <div class="status">–°–æ–≤–µ—Ç: –Ω–∞—á–Ω–∏ —Å 70‚Äì90 BPM –∏ –∏–≥—Ä–∞–π —Ä–æ–≤–Ω–æ —á–µ—Ç–≤–µ—Ä—Ç–∏.</div>
        </div>

        <div class="tile">
          <div class="tool-title">
            <b>üéº –¢—é–Ω–µ—Ä (—á–∞—Å—Ç–æ—Ç–∞)</b>
            <span class="pill">—à–ø–∞—Ä–≥–∞–ª–∫–∞</span>
          </div>
          <p class="lead" style="margin-top:8px">
            –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å—Ç—Ä–æ–π (EADGBE):
          </p>
          <ul class="hint">
            <li>6 —Å—Ç—Ä—É–Ω–∞: E2 ‚âà <span class="kbd">82.41 Hz</span></li>
            <li>5 —Å—Ç—Ä—É–Ω–∞: A2 ‚âà <span class="kbd">110.00 Hz</span></li>
            <li>4 —Å—Ç—Ä—É–Ω–∞: D3 ‚âà <span class="kbd">146.83 Hz</span></li>
            <li>3 —Å—Ç—Ä—É–Ω–∞: G3 ‚âà <span class="kbd">196.00 Hz</span></li>
            <li>2 —Å—Ç—Ä—É–Ω–∞: B3 ‚âà <span class="kbd">246.94 Hz</span></li>
            <li>1 —Å—Ç—Ä—É–Ω–∞: E4 ‚âà <span class="kbd">329.63 Hz</span></li>
          </ul>
          <div class="hr"></div>
          <p class="hint">–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É —Å–¥–µ–ª–∞—Ç—å ‚Äú—Ä–µ–∞–ª—å–Ω—ã–π –º–∏–∫—Ä–æ—Ñ–æ–Ω–Ω—ã–π —Ç—é–Ω–µ—Ä‚Äù, –Ω–æ —ç—Ç–æ —á—É—Ç—å —Å–ª–æ–∂–Ω–µ–µ –∏ –±—Ä–∞—É–∑–µ—Ä –ø–æ–ø—Ä–æ—Å–∏—Ç –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É.</p>
        </div>

        <div class="tile">
          <div class="tool-title">
            <b>üß† –¢—Ä–µ–Ω–∞–∂—ë—Ä: –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –ø–æ —Å—Ç—Ä—É–Ω–∞–º</b>
            <span class="pill" id="trainerState">–≥–æ—Ç–æ–≤</span>
          </div>
          <p class="lead" style="margin-top:8px">
            –ù–∞–∂–º–∏ ‚Äú–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å‚Äù ‚Äî –ø–æ–ª—É—á–∏—à—å –∑–∞–¥–∞–Ω–∏–µ: —Å—Ç—Ä—É–Ω–∞ + –ª–∞–¥. –¢–≤–æ—è —Ü–µ–ª—å ‚Äî –Ω–∞–∑–≤–∞—Ç—å –Ω–æ—Ç—É (–¥–ª—è —Å–µ–±—è).
          </p>
          <div class="tool-controls">
            <button class="btn" onclick="newTask()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
            <button class="btn secondary" onclick="showAnswer()">–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç</button>
          </div>
          <div class="hr"></div>
          <div class="big" id="task">‚Äî</div>
          <div class="bar" aria-hidden="true"><div id="prog"></div></div>
          <div class="status" id="answer">–û—Ç–≤–µ—Ç —Å–∫—Ä—ã—Ç</div>
        </div>

      </div>
    </section>

    <!-- QUIZ -->
    <section id="quiz" class="section grid2">
      <div class="card">
        <h2>–ö–≤–∏–∑: –±–∞–∑–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è</h2>
        <p class="lead" style="margin-top:-4px">–ü—Ä–æ—Å—Ç–æ —á—Ç–æ–±—ã –∑–∞–∫—Ä–µ–ø–∏—Ç—å. –ù–∞–∂–∏–º–∞–π –≤–∞—Ä–∏–∞–Ω—Ç –æ—Ç–≤–µ—Ç–∞.</p>
        <div class="hr"></div>

        <p class="quizq" id="qq">‚Äî</p>
        <div class="opt" id="opts"></div>
        <p class="hint" id="qres"></p>
        <div class="tool-controls">
          <button class="btn secondary" onclick="nextQuiz()">–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å</button>
        </div>
      </div>

      <div class="card">
        <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
        <div class="meta" style="gap:12px">
          <span class="tag">üìç –•–∞—Ä—å–∫–æ–≤</span>
          <span class="tag">üïò –ü–Ω‚Äì–°–±: 10:00‚Äì19:00</span>
          <span class="tag">‚úâÔ∏è maizesimon3@gmail.com</span>
        </div>
        <p class="lead" style="margin-top:10px">
          –≠—Ç–æ —É—á–µ–±–Ω—ã–π —Å–∞–π—Ç ‚Äú–≤—Å—ë –ø—Ä–æ –≥–∏—Ç–∞—Ä—ã‚Äù. –ú–æ–∂–Ω–æ –¥–æ–ø–∏–ª–∏—Ç—å –ø–æ–¥ —Ç–≤–æ—é —à–∫–æ–ª—É: –¥–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª ‚Äú–ò—Å—Ç–æ—Ä–∏—è –≥–∏—Ç–∞—Ä—ã‚Äù, ‚Äú–¢–∞–±—É–ª–∞—Ç—É—Ä—ã‚Äù –∏–ª–∏ ‚Äú–¢–µ–æ—Ä–∏—è‚Äù.
        </p>

        <div class="hr"></div>
        <div class="tool-title">
          <b>‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ</b>
          <button class="btn secondary" onclick="showFavorites()">–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫</button>
        </div>
        <p class="hint">–ò–∑–±—Ä–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ (localStorage).</p>
      </div>
    </section>

    <footer>
      ¬© <span id="y"></span> GuitarHub ‚Äî —É—á–µ–±–Ω—ã–π —Å–∞–π—Ç –ø—Ä–æ –≥–∏—Ç–∞—Ä—ã (–æ–¥–∏–Ω HTML-—Ñ–∞–π–ª)
    </footer>
  </div>

  <div id="toast" class="toast"></div>

  <script>
    // ---------- helpers ----------
    function scrollToId(id){ document.getElementById(id).scrollIntoView({behavior:"smooth", block:"start"}); }
    function toast(msg){
      const t = document.getElementById("toast");
      t.textContent = msg;
      t.style.display = "block";
      clearTimeout(window.__t);
      window.__t = setTimeout(()=> t.style.display="none", 1700);
    }
    document.getElementById("y").textContent = new Date().getFullYear();

    // ---------- favorites ----------
    const LS_KEY = "guitarhub_favs_v1";
    function loadFavs(){
      try{ return new Set(JSON.parse(localStorage.getItem(LS_KEY) || "[]")); }
      catch{ return new Set(); }
    }
    function saveFavs(set){
      localStorage.setItem(LS_KEY, JSON.stringify([...set]));
      document.getElementById("favCount").textContent = set.size;
    }
    let favs = loadFavs();
    document.getElementById("favCount").textContent = favs.size;

    // ---------- gallery data ----------
    // (–§–æ—Ç–æ: Unsplash. –≠—Ç–æ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω.)
    const guitars = [
      {
        id:"ac1", name:"A-100 Acoustic (Dreadnought)", type:"acoustic", skill:"new", price:7990, popular:5,
        tags:["–∞–∫–∫–æ—Ä–¥—ã","–¥–≤–æ—Ä","—É–Ω–∏–≤–µ—Ä—Å–∞–ª"], sound:"—è—Ä–∫–∏–π, –≥—Ä–æ–º–∫–∏–π", use:"–ø–µ—Å–Ω–∏, –±–æ–π, –ø–µ—Ä–µ–±–æ—Ä",
        tip:"–°–º–æ—Ç—Ä–∏, —á—Ç–æ–±—ã –≥—Ä–∏—Ñ –±—ã–ª —É–¥–æ–±–Ω—ã–π, –∞ –≤—ã—Å–æ—Ç–∞ —Å—Ç—Ä—É–Ω –Ω–µ —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∞—è.",
        img:"https://images.unsplash.com/photo-1510915228340-29c85a43dcfe?auto=format&fit=crop&w=1200&q=70"
      },
      {
        id:"ac2", name:"Travel Acoustic (3/4)", type:"acoustic", skill:"new", price:9990, popular:4,
        tags:["–∫–æ–º–ø–∞–∫—Ç","–≤ –¥–æ—Ä–æ–≥—É","–ª–µ–≥–∫–∞—è"], sound:"—Å—Ä–µ–¥–Ω—è—è –≥—Ä–æ–º–∫–æ—Å—Ç—å", use:"–ø–æ–µ–∑–¥–∫–∏, –ø—Ä–∞–∫—Ç–∏–∫–∞",
        tip:"–ö–æ—Ä–æ—Ç–∫–∞—è –º–µ–Ω–∑—É—Ä–∞ —É–¥–æ–±–Ω–µ–µ, –Ω–æ –∑–≤—É–∫ –æ–±—ã—á–Ω–æ —á—É—Ç—å —Ç–æ–Ω—å—à–µ.",
        img:"https://images.unsplash.com/photo-1520523839897-bd0b52f945a0?auto=format&fit=crop&w=1200&q=70"
      },
      {
        id:"cl1", name:"Classical Nylon (–ò—Å–ø–∞–Ω–∫–∞)", type:"classical", skill:"new", price:8990, popular:4,
        tags:["–Ω–µ–π–ª–æ–Ω","–º—è–≥–∫–æ","–∫–ª–∞—Å—Å–∏–∫–∞"], sound:"–º—è–≥–∫–∏–π, —Ç—ë–ø–ª—ã–π", use:"–∫–ª–∞—Å—Å–∏–∫–∞, –æ–±—É—á–µ–Ω–∏–µ",
        tip:"–ù–µ–π–ª–æ–Ω –º—è–≥—á–µ –ø–∞–ª—å—Ü–∞–º ‚Äî —á–∞—Å—Ç–æ –ª—É—á—à–∏–π —Å—Ç–∞—Ä—Ç.",
        img:"https://images.unsplash.com/photo-1458640904116-093b74971de9?auto=format&fit=crop&w=1200&q=70"
      },
      {
        id:"el1", name:"Strat S-Style", type:"electric", skill:"new", price:14990, popular:5,
        tags:["—Ä–æ–∫","–ø–æ–ø","—É–Ω–∏–≤–µ—Ä—Å–∞–ª"], sound:"–æ—Ç —á–∏—Å—Ç–æ–≥–æ –¥–æ –¥—Ä–∞–π–≤–∞", use:"—Ä–æ–∫, –ø–æ–ø, –∫–∞–≤–µ—Ä—ã",
        tip:"–î–ª—è —ç–ª–µ–∫—Ç—Ä–æ –Ω—É–∂–µ–Ω –∫–æ–º–±–∏–∫/–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –ù–∞—á–Ω–∏ —Å —á–∏—Å—Ç–æ–≥–æ + –ª—ë–≥–∫–∏–π –æ–≤–µ—Ä–¥—Ä–∞–π–≤.",
        img:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?auto=format&fit=crop&w=1200&q=70"
      },
      {
        id:"el2", name:"Tele T-Classic", type:"electric", skill:"mid", price:15990, popular:3,
        tags:["–∏–Ω–¥–∏","–∫—Ä–∞–Ω—á","—Ä–∏—Ç–º"], sound:"–∑–≤–æ–Ω–∫–∏–π, —á–∏—Ç–∞–µ–º—ã–π", use:"—Ä–∏—Ç–º-–ø–∞—Ä—Ç–∏–∏, –∏–Ω–¥–∏",
        tip:"–û—Ç–ª–∏—á–Ω–æ —Ä–µ–∂–µ—Ç –º–∏–∫—Å, –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ –±—Ä–∏–¥–∂–µ–≤–æ–º –∑–≤—É–∫–æ—Å–Ω–∏–º–∞—Ç–µ–ª–µ.",
        img:"https://images.unsplash.com/photo-1519682337058-a94d519337bc?auto=format&fit=crop&w=1200&q=70"
      },
      {
        id:"el3", name:"Metal HH (2 —Ö–∞–º–±–∞–∫–µ—Ä–∞)", type:"electric", skill:"mid", price:19990, popular:4,
        tags:["–º–µ—Ç–∞–ª","—Ö–∞–π-–≥–µ–π–Ω","–ø–ª–æ—Ç–Ω–æ"], sound:"–∂–∏—Ä–Ω—ã–π, –º–æ—â–Ω—ã–π", use:"–º–µ—Ç–∞–ª, —Ö–∞—Ä–¥-—Ä–æ–∫",
        tip:"–•–∞–º–±–∞–∫–µ—Ä—ã –º–µ–Ω—å—à–µ —Ñ–æ–Ω—è—Ç –∏ –¥–∞—é—Ç –ø–ª–æ—Ç–Ω—ã–π –ø–µ—Ä–µ–≥—Ä—É–∑.",
        img:"https://images.unsplash.com/photo-1507838153414-b4b713384a76?auto=format&fit=crop&w=1200&q=70"
      },
      {
        id:"ba1", name:"Bass B-4 (4 —Å—Ç—Ä—É–Ω—ã)", type:"bass", skill:"new", price:16990, popular:4,
        tags:["–≥—Ä—É–≤","—Ñ–∞–Ω–∫","–æ—Å–Ω–æ–≤–∞"], sound:"–Ω–∏–∑, –∞—Ç–∞–∫–∞", use:"–±–∞—Å-–ª–∏–Ω–∏–∏, –≥—Ä—É–≤",
        tip:"–ò–≥—Ä–∞–π –ø–æ–¥ –º–µ—Ç—Ä–æ–Ω–æ–º ‚Äî –±–∞—Å –¥–µ—Ä–∂–∏—Ç —Ä–∏—Ç–º.",
        img:"https://images.unsplash.com/photo-1525201548942-d8732f6617a0?auto=format&fit=crop&w=1200&q=70"
      },
      {
        id:"ba2", name:"Bass LongScale", type:"bass", skill:"pro", price:21990, popular:3,
        tags:["–ø–ª–æ—Ç–Ω–æ","—Ä–æ–∫","—Å—Ü–µ–Ω–∞"], sound:"–≥–ª—É–±–æ–∫–∏–π –Ω–∏–∑", use:"—Å—Ü–µ–Ω–∞, –∑–∞–ø–∏—Å—å",
        tip:"–î–ª–∏–Ω–Ω–∞—è –º–µ–Ω–∑—É—Ä–∞ –¥–∞—ë—Ç —á—ë—Ç—á–µ –Ω–∏–∑, –Ω–æ —Ç—è–Ω—É—Ç—å —Å—Ç—Ä—É–Ω—ã —Å–ª–æ–∂–Ω–µ–µ.",
        img:"https://images.unsplash.com/photo-1520975693411-b64a1a5ad0aa?auto=format&fit=crop&w=1200&q=70"
      },
      {
        id:"ac3", name:"Fingerstyle Acoustic", type:"acoustic", skill:"mid", price:17990, popular:4,
        tags:["—Ñ–∏–Ω–≥–µ—Ä—Å—Ç–∞–π–ª","–¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è","–ø–µ—Ä–µ–±–æ—Ä"], sound:"–¥–µ—Ç–∞–ª—å–Ω—ã–π –≤–µ—Ä—Ö", use:"–ø–µ—Ä–µ–±–æ—Ä—ã, —Å–æ–ª–æ-–∞–∫—É—Å—Ç–∏–∫–∞",
        tip:"–ò—â–∏ —É–¥–æ–±–Ω—ã–π –≤—ã—Ä–µ–∑ –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Å—Ç—Ä–æ–π –ø–æ –≥—Ä–∏—Ñ—É.",
        img:"https://images.unsplash.com/photo-1485579149621-3123dd979885?auto=format&fit=crop&w=1200&q=70"
      }
    ];

    function typeLabel(t){
      return t==="electric"?"–≠–ª–µ–∫—Ç—Ä–æ":t==="acoustic"?"–ê–∫—É—Å—Ç–∏–∫–∞":t==="classical"?"–ö–ª–∞—Å—Å–∏–∫–∞":"–ë–∞—Å";
    }
    function skillLabel(s){
      return s==="new"?"–ù–æ–≤–∏—á–æ–∫":s==="mid"?"–£–≤–µ—Ä–µ–Ω–Ω—ã–π":"–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π";
    }
    function money(n){
      return new Intl.NumberFormat("ru-RU").format(n) + " –≥—Ä–Ω";
    }

    function toggleFav(id){
      if (favs.has(id)) { favs.delete(id); toast("–£–±—Ä–∞–Ω–æ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ"); }
      else { favs.add(id); toast("–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ ‚≠ê"); }
      saveFavs(favs);
      renderGallery();
    }

    function showFavorites(){
      if (favs.size===0){ alert("–ò–∑–±—Ä–∞–Ω–Ω–æ–µ –ø—É—Å—Ç–æ–µ"); return; }
      const items = guitars.filter(g=>favs.has(g.id)).map(g=>`‚Ä¢ ${g.name} (${typeLabel(g.type)})`);
      alert("–ò–∑–±—Ä–∞–Ω–Ω–æ–µ:\n" + items.join("\n"));
    }

    function renderGallery(){
      const q = document.getElementById("q").value.trim().toLowerCase();
      const type = document.getElementById("type").value;
      const skill = document.getElementById("skill").value;
      const sort = document.getElementById("sort").value;

      let list = guitars.filter(g=>{
        const text = (g.name+" "+g.tags.join(" ")+" "+g.sound+" "+g.use).toLowerCase();
        const okQ = !q || text.includes(q);
        const okT = (type==="all") || (g.type===type);
        const okS = (skill==="all") || (g.skill===skill);
        return okQ && okT && okS;
      });

      if (sort==="cheap") list.sort((a,b)=>a.price-b.price);
      if (sort==="expensive") list.sort((a,b)=>b.price-a.price);
      if (sort==="popular") list.sort((a,b)=>b.popular-a.popular);

      const wrap = document.getElementById("products");
      wrap.innerHTML = "";
      for (const g of list){
        const isFav = favs.has(g.id);
        const el = document.createElement("div");
        el.className = "product";
        el.innerHTML = `
          <div class="photo">
            <img src="${g.img}" alt="${g.name}">
            <div class="corner">
              <span class="chip"><strong>${typeLabel(g.type)}</strong></span>
              <span class="chip">${skillLabel(g.skill)}</span>
              <span class="chip">‚òÖ ${g.popular}/5</span>
            </div>
          </div>
          <div class="pinfo">
            <div>
              <h3>${g.name}</h3>
              <div class="meta">
                ${g.tags.map(t=>`<span class="tag">${t}</span>`).join("")}
              </div>
              <div class="row">
                <b>${money(g.price)}</b>
                <small>${g.sound}</small>
              </div>
              <p class="hint" style="margin:8px 0 0">
                <b>–î–ª—è —á–µ–≥–æ:</b> ${g.use}<br>
                <b>–°–æ–≤–µ—Ç:</b> ${g.tip}
              </p>
            </div>
            <div class="buy">
              <button class="btn secondary" onclick="toggleFav('${g.id}')">${isFav ? "–£–±—Ä–∞—Ç—å ‚≠ê" : "–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ ‚≠ê"}</button>
              <button class="btn" onclick="toast('–û—Ç–∫—Ä—ã—Ç–æ: ${g.name}')">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
            </div>
          </div>
        `;
        wrap.appendChild(el);
      }
    }

    renderGallery();
    saveFavs(favs);

    // ---------- picker ----------
    const picker = {
      rock: {
        new: {badge:"–≠–ª–µ–∫—Ç—Ä–æ –∏–ª–∏ –∞–∫—É—Å—Ç–∏–∫–∞", text:"–î–ª—è —Ä–æ–∫/–ø–æ–ø-—Ä–æ–∫–∞ –ø–æ–¥–æ–π–¥—ë—Ç —ç–ª–µ–∫—Ç—Ä–æ (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ), –Ω–æ –∞–∫—É—Å—Ç–∏–∫–∞ —Ç–æ–∂–µ –æ–∫ –¥–ª—è –∞–∫–∫–æ—Ä–¥–æ–≤ –∏ –∫–∞–≤–µ—Ä–æ–≤.",
              kit:"–°—Ç–∞—Ä—Ç-–Ω–∞–±–æ—Ä: –≥–∏—Ç–∞—Ä–∞ + —Ç—é–Ω–µ—Ä + –º–µ–¥–∏–∞—Ç–æ—Ä—ã + –∑–∞–ø–∞—Å —Å—Ç—Ä—É–Ω. –î–ª—è —ç–ª–µ–∫—Ç—Ä–æ: –µ—â—ë –∫–∞–±–µ–ª—å –∏ –Ω–µ–±–æ–ª—å—à–æ–π –∫–æ–º–±–∏–∫/–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å."},
        mid: {badge:"–≠–ª–µ–∫—Ç—Ä–æ (S-Style / T-Style)", text:"–õ—É—á—à–µ —ç–ª–µ–∫—Ç—Ä–æ: –±—É–¥–µ—Ç –ø—Ä–æ—â–µ –¥–æ–±–∏–≤–∞—Ç—å—Å—è –Ω—É–∂–Ω–æ–≥–æ —Ç–µ–º–±—Ä–∞ –∏ –∏–≥—Ä–∞—Ç—å —Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏.",
              kit:"–ú–∏–Ω–∏-—Å–µ—Ç–∞–ø: –∫–æ–º–±–∏–∫ 10‚Äì20W –∏–ª–∏ –∞—É–¥–∏–æ–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å + —Å–æ—Ñ—Ç, –ø–ª—é—Å –∫–∞–±–µ–ª—å –∏ —Ä–µ–º–µ–Ω—å."},
        pro: {badge:"–≠–ª–µ–∫—Ç—Ä–æ + —ç—Ñ—Ñ–µ–∫—Ç—ã", text:"–î–ª—è –∑–∞–ø–∏—Å–∏/—Å—Ü–µ–Ω—ã —É–¥–æ–±–Ω–µ–µ —ç–ª–µ–∫—Ç—Ä–æ –∏ –ø–µ–¥–∞–ª–∏/–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä ‚Äî –≥–∏–±–∫–æ—Å—Ç—å –∑–≤—É–∫–∞.",
              kit:"–ü—Ä–æ: –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä/–ø–µ–¥–∞–ª–∏, —à—É–º–æ–¥–∞–≤, –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–∞–±–µ–ª—å, —Ö–æ—Ä–æ—à–∏–π —Å–µ—Ç–∞–ø —Å—Ç—Ä—É–Ω."}
      },
      metal: {
        new: {badge:"–≠–ª–µ–∫—Ç—Ä–æ —Å —Ö–∞–º–±–∞–∫–µ—Ä–∞–º–∏", text:"–î–ª—è –º–µ—Ç–∞–ª–∞ –ª—É—á—à–µ —ç–ª–µ–∫—Ç—Ä–æ HH (2 —Ö–∞–º–±–∞–∫–µ—Ä–∞): –ø–ª–æ—Ç–Ω–µ–µ –∑–≤—É–∫ –∏ –º–µ–Ω—å—à–µ —Ñ–æ–Ω–∞.",
              kit:"–°—Ç–∞—Ä—Ç: HH-–≥–∏—Ç–∞—Ä–∞ + –∫–æ–º–±–∏–∫/–ø–ª–∞–≥–∏–Ω —Å —Ö–∞–π-–≥–µ–π–Ω–æ–º + —Ç—é–Ω–µ—Ä."},
        mid: {badge:"–≠–ª–µ–∫—Ç—Ä–æ HH + –Ω–∞—Å—Ç—Ä–æ–π–∫–∞", text:"–£–¥–µ–ª–∏ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –º–µ–Ω–∑—É—Ä—ã –∏ –≤—ã—Å–æ—Ç—ã —Å—Ç—Ä—É–Ω ‚Äî —Ä–∏—Ñ—Ñ—ã –±—É–¥—É—Ç —á–∏—â–µ.",
              kit:"–î–æ–±–∞–≤—å: –º–µ–¥–∏–∞—Ç–æ—Ä—ã 0.88‚Äì1.14, —à—É–º–æ–¥–∞–≤ (–ø–æ –∂–µ–ª–∞–Ω–∏—é), —Ç–æ–ª—Å—Ç—ã–µ —Å—Ç—Ä—É–Ω—ã –¥–ª—è –ø–æ–Ω–∏–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–µ–≤."},
        pro: {badge:"–ü–æ–Ω–∏–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∏", text:"–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π —Å Drop D/C, –±–∞—Ä–∏—Ç–æ–Ω-–º–µ–Ω–∑—É—Ä–æ–π –∏ –∂—ë—Å—Ç–∫–æ–π –∞—Ç–∞–∫–æ–π.",
              kit:"–ü—Ä–æ: –∫–∞–ª–∏–±—Ä —Å—Ç—Ä—É–Ω –≤—ã—à–µ, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–Ω–∫–µ—Ä–∞, –∑–≤—É–∫–æ—Å–Ω–∏–º–∞—Ç–µ–ª–∏ –ø–æ–¥ —Å—Ç–∏–ª—å."}
      },
      pop: {
        new: {badge:"–ê–∫—É—Å—Ç–∏–∫–∞ –∏–ª–∏ –∫–ª–∞—Å—Å–∏–∫–∞", text:"–î–ª—è –ø–æ–ø-–∞–∫–∫–æ—Ä–¥–æ–≤ –æ—Ç–ª–∏—á–Ω–æ: –∞–∫—É—Å—Ç–∏–∫–∞ (—è—Ä–∫–æ) –∏–ª–∏ –∫–ª–∞—Å—Å–∏–∫–∞ (–º—è–≥–∫–æ).",
              kit:"–°—Ç–∞—Ä—Ç: –∫–∞–ø–æ–¥–∞—Å—Ç—Ä, —Ç—é–Ω–µ—Ä, –Ω–∞–±–æ—Ä –º–µ–¥–∏–∞—Ç–æ—Ä–æ–≤, —Å—Ç—Ä—É–Ω—ã."},
        mid: {badge:"–ê–∫—É—Å—Ç–∏–∫–∞ —Å –∫–∞–ø–æ–¥–∞—Å—Ç—Ä–æ–º", text:"–ö–∞–ø–æ–¥–∞—Å—Ç—Ä + —Ä–æ–≤–Ω—ã–π –±–æ–π = –ø–æ–ª–æ–≤–∏–Ω–∞ —É—Å–ø–µ—Ö–∞ –¥–ª—è –∫–∞–≤–µ—Ä–æ–≤.",
              kit:"–î–æ–±–∞–≤—å: –º–µ—Ç—Ä–æ–Ω–æ–º, –∑–∞–ø–∏—Å—ã–≤–∞–π —Å–µ–±—è –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω –∏ —Å–ª—É—à–∞–π —Ä–æ–≤–Ω–æ—Å—Ç—å."},
        pro: {badge:"–°–æ–ª–æ-–∞–∫—É—Å—Ç–∏–∫–∞", text:"–î–æ–±–∞–≤–ª—è–π –ø–µ—Ä–µ–±–æ—Ä—ã, –∞—Ä–ø–µ–¥–∂–∏–æ, —É–∫—Ä–∞—à–µ–Ω–∏—è (hammer-on/pull-off).",
              kit:"–ü—Ä–æ: —Ö–æ—Ä–æ—à–∏–µ —Å—Ç—Ä—É–Ω—ã, —É—Ö–æ–¥ –∑–∞ –≥—Ä–∏—Ñ–æ–º, —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Å—Ç—Ä–æ–π."}
      },
      jazz: {
        new: {badge:"–≠–ª–µ–∫—Ç—Ä–æ (—á–∏—Å—Ç—ã–π –∑–≤—É–∫)", text:"–î–ª—è –¥–∂–∞–∑–∞ –≤–∞–∂–Ω–æ —á–∏—Å—Ç–æ–µ –∑–≤—É—á–∞–Ω–∏–µ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–∏–Ω–∞–º–∏–∫–∏.",
              kit:"–°—Ç–∞—Ä—Ç: —ç–ª–µ–∫—Ç—Ä–æ + —á–∏—Å—Ç—ã–π –ø—Ä–µ—Å–µ—Ç, —Ä–∞–±–æ—Ç–∞–π –Ω–∞–¥ —Ä–∏—Ç–º–æ–º –∏ –º—è–≥–∫–æ–π –∞—Ç–∞–∫–æ–π."},
        mid: {badge:"–¢—ë–ø–ª—ã–π —Ç–µ–º–±—Ä", text:"–ò—Å–ø–æ–ª—å–∑—É–π –Ω–µ–∫–æ–≤—ã–π –∑–≤—É–∫–æ—Å–Ω–∏–º–∞—Ç–µ–ª—å –∏ —Ç–æ–Ω-—Ä–µ–≥—É–ª—è—Ç–æ—Ä.",
              kit:"–î–æ–±–∞–≤—å: —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –Ω–∞ –∞–∫–∫–æ—Ä–¥–æ–≤—ã–µ —Ñ–æ—Ä–º—ã –∏ —Å–≤–∏–Ω–≥-—Ä–∏—Ç–º."},
        pro: {badge:"–ê–∫–∫–æ—Ä–¥—ã + –∏–º–ø—Ä–æ–≤–∏–∑–∞—Ü–∏—è", text:"–†–∞–∑–≤–∏–≤–∞–π –≥–∞—Ä–º–æ–Ω–∏—é –∏ —Ñ—Ä–∞–∑—ã, –∏–≥—Ä–∞–π —Å –º–µ—Ç—Ä–æ–Ω–æ–º–æ–º –Ω–∞ 2 –∏ 4 –¥–æ–ª—é.",
              kit:"–ü—Ä–æ: –∑–∞–ø–∏—Å—å —Å–≤–æ–∏—Ö –¥–∂–µ–º–æ–≤, –∞–Ω–∞–ª–∏–∑ —Ñ—Ä–∞–∑."}
      },
      fingerstyle: {
        new: {badge:"–ê–∫—É—Å—Ç–∏–∫–∞ (—É–¥–æ–±–Ω—ã–π –≥—Ä–∏—Ñ)", text:"–§–∏–Ω–≥–µ—Ä—Å—Ç–∞–π–ª —Ç—Ä–µ–±—É–µ—Ç —É–¥–æ–±—Å—Ç–≤–∞: –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π –≥—Ä–∏—Ñ –∏ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Å—Ç—Ä–æ–π.",
              kit:"–°—Ç–∞—Ä—Ç: –∞–∫—É—Å—Ç–∏–∫–∞ + –º–µ—Ç—Ä–æ–Ω–æ–º, –ø—Ä–æ—Å—Ç—ã–µ –ø–µ—Ä–µ–±–æ—Ä—ã."},
        mid: {badge:"–î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∑–≤—É–∫–∞", text:"–†–∞–±–æ—Ç–∞–π –Ω–∞–¥ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å—é –ø–∞–ª—å—Ü–µ–≤ –∏ —á–∏—Å—Ç–æ—Ç–æ–π –Ω–æ—Ç.",
              kit:"–î–æ–±–∞–≤—å: —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –Ω–∞ –∞—Ä–ø–µ–¥–∂–∏–æ –∏ ‚Äú–±–∞—Å+–º–µ–ª–æ–¥–∏—è‚Äù."},
        pro: {badge:"–°–ª–æ–∂–Ω—ã–µ –∞—Ä–∞–Ω–∂–∏—Ä–æ–≤–∫–∏", text:"–¢—ç–ø–ø–∏–Ω–≥, –ø–µ—Ä–∫—É—Å—Å–∏—è –ø–æ –∫–æ—Ä–ø—É—Å—É, —Å–º–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏–π.",
              kit:"–ü—Ä–æ: –∑–∞–ø–∏—Å—å –≤–∏–¥–µ–æ, –æ—Ç—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–¥ –∫–ª–∏–∫–∏."}
      }
    };

    function runPicker(){
      const s = document.getElementById("pickStyle").value;
      const l = document.getElementById("pickLevel").value;
      const r = picker[s][l];
      document.getElementById("pickBadge").textContent = r.badge;
      document.getElementById("pickText").textContent = r.text;
      document.getElementById("pickKit").textContent = r.kit;
      toast("–ü–æ–¥–±–æ—Ä –≥–æ—Ç–æ–≤ ‚úÖ");
    }

    // ---------- chords ----------
    const chordData = [
      // name, group, strings(EADGBE): 6..1 frets (x muted, 0 open)
      {name:"Am", group:"minor", frets:["x",0,2,2,1,0], hint:"–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–∏–Ω–æ—Ä. –°–ª–µ–¥–∏, —á—Ç–æ–±—ã 1-—è —Å—Ç—Ä—É–Ω–∞ –∑–≤—É—á–∞–ª–∞ –æ—Ç–∫—Ä—ã—Ç–æ."},
      {name:"C",  group:"major", frets:["x",3,2,0,1,0], hint:"–ù–µ –∑–∞–¥–µ–≤–∞–π 6-—é —Å—Ç—Ä—É–Ω—É (–æ–Ω–∞ –ø—Ä–∏–≥–ª—É—à–µ–Ω–∞)."},
      {name:"G",  group:"major", frets:[3,2,0,0,0,3], hint:"–ú–æ–∂–Ω–æ –∏–≥—Ä–∞—Ç—å –∏ –≤–∞—Ä–∏–∞–Ω—Ç G (3-2-0-0-3-3)."},
      {name:"D",  group:"major", frets:["x","x",0,2,3,2], hint:"–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ –Ω–∞ –≤–µ—Ä—Ö–Ω–∏—Ö —Å—Ç—Ä—É–Ω–∞—Ö."},
      {name:"Em", group:"minor", frets:[0,2,2,0,0,0], hint:"–û—á–µ–Ω—å —É–¥–æ–±–Ω—ã–π –∞–∫–∫–æ—Ä–¥ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞."},
      {name:"E",  group:"major", frets:[0,2,2,1,0,0], hint:"–°–ª–µ–¥–∏ –∑–∞ —á–∏—Å—Ç–æ—Ç–æ–π 3-–π —Å—Ç—Ä—É–Ω—ã."},
      {name:"Dm", group:"minor", frets:["x","x",0,2,3,1], hint:"–ú–∏–∑–∏–Ω–µ—Ü —á–∞—Å—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —É–¥–µ—Ä–∂–∞—Ç—å —Ñ–æ—Ä–º—É."},
      {name:"A",  group:"major", frets:["x",0,2,2,2,0], hint:"–ú–æ–∂–Ω–æ –∑–∞–∂–∏–º–∞—Ç—å 2-2-2 –æ–¥–Ω–∏–º –ø–∞–ª—å—Ü–µ–º (–±–∞—Ä—Ä—ç –º–∏–Ω–∏)."},
      {name:"F",  group:"major", frets:[1,3,3,2,1,1], hint:"–ü–æ–ª–Ω–æ–µ –±–∞—Ä—Ä—ç. –¢—Ä–µ–Ω–∏—Ä—É–π –ø—Ä–∏–∂–∏–º —É–∫–∞–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ."},
      {name:"E7", group:"7",     frets:[0,2,0,1,0,0], hint:"–õ—ë–≥–∫–∏–π —Å–µ–ø—Ç–∞–∫–∫–æ—Ä–¥ –¥–ª—è –±–ª—é–∑–∞."},
      {name:"A7", group:"7",     frets:["x",0,2,0,2,0], hint:"–•–æ—Ä–æ—à–æ –∑–≤—É—á–∏—Ç –≤ –ø–µ—Å–Ω—è—Ö –∏ –±–ª—é–∑–µ."},
      {name:"D7", group:"7",     frets:["x","x",0,2,1,2], hint:"–°–ª–µ–¥–∏, —á—Ç–æ–±—ã 1-—è —Å—Ç—Ä—É–Ω–∞ –∑–≤—É—á–∞–ª–∞ —á–∏—Å—Ç–æ."},
    ];

    function renderChords(){
      const q = document.getElementById("cq").value.trim().toLowerCase();
      const grp = document.getElementById("chGroup").value;
      const list = chordData.filter(c=>{
        const okQ = !q || c.name.toLowerCase().includes(q);
        const okG = grp==="all" || c.group===grp;
        return okQ && okG;
      });

      const wrap = document.getElementById("chordsList");
      wrap.innerHTML = "";
      for (const c of list){
        const el = document.createElement("div");
        el.className = "ch";
        el.innerHTML = `
          <b>${c.name}</b>
          <div class="meta">
            <span class="tag">${c.group==="major"?"–º–∞–∂–æ—Ä":c.group==="minor"?"–º–∏–Ω–æ—Ä":"7"}</span>
            <span class="tag kbd">${c.frets.join(" ")}</span>
          </div>
        `;
        el.onclick = ()=>selectChord(c.name);
        wrap.appendChild(el);
      }
      if (list.length===0){
        wrap.innerHTML = `<div class="pill">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>`;
      }
    }

    function chordSVG(frets){
      // draw 6 strings x 5 frets
      const W=220, H=260, pad=20;
      const top=35, left=30, right=30, bottom=30;
      const gridW=W-left-right, gridH=H-top-bottom;
      const strings=6, fretsCount=5;

      // determine starting fret for display
      const nums = frets.filter(x=>x!=="x" && x!==0).map(Number);
      const max = nums.length?Math.max(...nums):1;
      let start = 1;
      if (max>5) start = max-4;

      const xStep = gridW/(strings-1);
      const yStep = gridH/fretsCount;

      let circles = "";
      let topMarks = "";

      // top marks X / O
      for(let i=0;i<strings;i++){
        const val = frets[i];
        const x = left + i*xStep;
        if (val==="x"){
          topMarks += `<text x="${x}" y="${top-12}" text-anchor="middle" font-size="14" fill="rgba(255,255,255,.8)">x</text>`;
        } else if (val===0){
          topMarks += `<text x="${x}" y="${top-12}" text-anchor="middle" font-size="14" fill="rgba(255,255,255,.8)">o</text>`;
        } else {
          const fret = Number(val);
          const displayFret = fret - start + 1;
          const y = top + (displayFret-0.5)*yStep;
          circles += `<circle cx="${x}" cy="${y}" r="9" fill="rgba(255,176,32,.95)" />`;
        }
      }

      // grid
      let lines = "";
      // strings
      for(let i=0;i<strings;i++){
        const x = left + i*xStep;
        lines += `<line x1="${x}" y1="${top}" x2="${x}" y2="${top+gridH}" stroke="rgba(255,255,255,.25)" stroke-width="2"/>`;
      }
      // frets
      for(let f=0; f<=fretsCount; f++){
        const y = top + f*yStep;
        const w = (f===0 && start===1) ? 5 : 2;
        lines += `<line x1="${left}" y1="${y}" x2="${left+gridW}" y2="${y}" stroke="rgba(255,255,255,.25)" stroke-width="${w}"/>`;
      }

      const label = start>1
        ? `<text x="${left-10}" y="${top + 16}" text-anchor="end" font-size="12" fill="rgba(255,255,255,.7)">${start}fr</text>`
        : "";

      return `
        <svg viewBox="0 0 ${W} ${H}" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Chord diagram">
          <rect x="0" y="0" width="${W}" height="${H}" rx="16" ry="16" fill="rgba(255,255,255,.02)" />
          ${label}
          ${topMarks}
          ${lines}
          ${circles}
        </svg>
      `;
    }

    function selectChord(name){
      const c = chordData.find(x=>x.name===name);
      if(!c) return;
      document.getElementById("chName").textContent = name;
      document.getElementById("diagram").innerHTML = chordSVG(c.frets);
      document.getElementById("chHint").textContent = c.hint;
      toast("–ê–∫–∫–æ—Ä–¥ –≤—ã–±—Ä–∞–Ω: " + name);
    }

    renderChords();

    // ---------- metronome ----------
    let metroOn = false;
    let metroTimer = null;
    let tickState = false;
    let audioCtx = null;

    function beep(){
      // simple WebAudio click
      if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      const o = audioCtx.createOscillator();
      const g = audioCtx.createGain();
      o.type = "square";
      o.frequency.value = tickState ? 880 : 660;
      g.gain.value = 0.06;
      o.connect(g); g.connect(audioCtx.destination);
      o.start();
      o.stop(audioCtx.currentTime + 0.05);
    }

    function toggleMetronome(){
      const bpm = clampBpm(Number(document.getElementById("bpm").value || 90));
      document.getElementById("bpm").value = bpm;

      metroOn = !metroOn;
      document.getElementById("metroState").textContent = metroOn ? "–≤–∫–ª" : "–≤—ã–∫–ª";
      if (!metroOn){
        clearInterval(metroTimer);
        metroTimer = null;
        document.getElementById("tick").textContent = "‚Äî";
        return;
      }

      const interval = Math.round(60000 / bpm);
      document.getElementById("tick").textContent = "‚óè";
      tickState = false;

      beep();
      metroTimer = setInterval(()=>{
        tickState = !tickState;
        document.getElementById("tick").textContent = tickState ? "‚óè" : "‚óã";
        beep();
      }, interval);
    }

    function clampBpm(v){
      if (!Number.isFinite(v)) return 90;
      return Math.min(240, Math.max(40, Math.round(v)));
    }

    let tapTimes = [];
    function tapTempo(){
      const now = Date.now();
      tapTimes.push(now);
      tapTimes = tapTimes.slice(-6);
      if (tapTimes.length >= 3){
        const diffs = [];
        for (let i=1;i<tapTimes.length;i++) diffs.push(tapTimes[i]-tapTimes[i-1]);
        const avg = diffs.reduce((a,b)=>a+b,0)/diffs.length;
        const bpm = clampBpm(60000/avg);
        document.getElementById("bpm").value = bpm;
        toast("Tap BPM: " + bpm);
        if (metroOn){
          toggleMetronome();
          toggleMetronome();
        }
      } else {
        toast("Tap‚Ä¶ ("+tapTimes.length+")");
      }
    }

    // ---------- trainer ----------
    const openNotes = [
      {string:6, name:"E", midi:40},
      {string:5, name:"A", midi:45},
      {string:4, name:"D", midi:50},
      {string:3, name:"G", midi:55},
      {string:2, name:"B", midi:59},
      {string:1, name:"E", midi:64},
    ];
    const noteNames = ["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];
    let currentTask = null;
    let progress = 0;

    function midiToName(m){
      const n = noteNames[m % 12];
      const oct = Math.floor(m/12)-1;
      return n + oct;
    }
    function newTask(){
      const s = openNotes[Math.floor(Math.random()*openNotes.length)];
      const fret = Math.floor(Math.random()*13); // 0-12
      const midi = s.midi + fret;
      currentTask = {string:s.string, fret, ans:midiToName(midi)};
      document.getElementById("task").textContent = `–°—Ç—Ä—É–Ω–∞ ${s.string}, –ª–∞–¥ ${fret}`;
      document.getElementById("answer").textContent = "–û—Ç–≤–µ—Ç —Å–∫—Ä—ã—Ç";
      document.getElementById("trainerState").textContent = "–∑–∞–¥–∞—á–∞";
      progress = Math.min(100, progress + 12);
      document.getElementById("prog").style.width = progress + "%";
    }
    function showAnswer(){
      if (!currentTask){ toast("–°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π –∑–∞–¥–∞—á—É"); return; }
      document.getElementById("answer").textContent = "–ù–æ—Ç–∞: " + currentTask.ans;
      document.getElementById("trainerState").textContent = "–æ—Ç–≤–µ—Ç";
    }

    // ---------- quiz ----------
    const quiz = [
      {q:"–ö–∞–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä—É–Ω —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è (–æ—Ç 6 –∫ 1)?", a:["EADGBE","DADGAD","CGDAEB"], right:0},
      {q:"–ó–∞—á–µ–º –Ω—É–∂–µ–Ω –º–µ—Ç—Ä–æ–Ω–æ–º?", a:["–ß—Ç–æ–±—ã —Ä–æ–≤–Ω–æ –¥–µ—Ä–∂–∞—Ç—å —Ä–∏—Ç–º","–ß—Ç–æ–±—ã –±—ã—Å—Ç—Ä–µ–µ —Å–º–µ–Ω–∏—Ç—å —Å—Ç—Ä—É–Ω—ã","–ß—Ç–æ–±—ã —É—Å–∏–ª–∏—Ç—å –∑–≤—É–∫"], right:0},
      {q:"–ß—Ç–æ –æ–±—ã—á–Ω–æ –ª—É—á—à–µ –¥–ª—è –º–µ—Ç–∞–ª–∞?", a:["–•–∞–º–±–∞–∫–µ—Ä—ã (HH)","–ù–µ–π–ª–æ–Ω–æ–≤—ã–µ —Å—Ç—Ä—É–Ω—ã","–¢–æ–ª—å–∫–æ –∞–∫—É—Å—Ç–∏–∫–∞"], right:0},
      {q:"–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –≥–∏—Ç–∞—Ä–∞ —á–∞—â–µ –≤—Å–µ–≥–æ —Å–æ —Å—Ç—Ä—É–Ω–∞–º–∏:", a:["–ù–µ–π–ª–æ–Ω","–°—Ç–∞–ª—å","–ú–µ—Ç–∞–ª–ª 2 –º–º"], right:0},
      {q:"–ü—Ä–æ–µ–∫—Ü–∏—è –∑–≤—É–∫–∞ —É –∞–∫—É—Å—Ç–∏–∫–∏ –≤—ã—à–µ, –µ—Å–ª–∏:", a:["–ö–æ—Ä–ø—É—Å –±–æ–ª—å—à–µ (–≤ —Å—Ä–µ–¥–Ω–µ–º)","–ì—Ä–∏—Ñ –∫–æ—Ä–æ—á–µ","–ü–µ–¥–∞–ª—å –¥–∏—Å—Ç–æ—Ä—à–Ω –≤–∫–ª—é—á–µ–Ω–∞"], right:0},
    ];
    let qi = 0;

    function renderQuiz(){
      const item = quiz[qi % quiz.length];
      document.getElementById("qq").textContent = item.q;
      const wrap = document.getElementById("opts");
      wrap.innerHTML = "";
      document.getElementById("qres").textContent = "";

      item.a.forEach((txt, idx)=>{
        const b = document.createElement("button");
        b.className = idx===item.right ? "btn secondary" : "btn secondary";
        b.textContent = txt;
        b.onclick = ()=>checkQuiz(idx);
        wrap.appendChild(b);
      });
    }

    function checkQuiz(ans){
      const item = quiz[qi % quiz.length];
      const r = document.getElementById("qres");
      if (ans === item.right){
        r.innerHTML = `<span class="good">–í–µ—Ä–Ω–æ ‚úÖ</span>`;
        toast("–ö—Ä—É—Ç–æ! ‚úÖ");
      } else {
        r.innerHTML = `<span class="bad">–ù–µ–≤–µ—Ä–Ω–æ ‚ùå</span> –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: <b>${item.a[item.right]}</b>`;
      }
    }
    function nextQuiz(){
      qi++;
      renderQuiz();
    }
    renderQuiz();
  </script>
</body>
</html>
